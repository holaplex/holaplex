#import "./ProfileInfo.graphql"

query ownedNFTs($address: PublicKey!, $limit: Int!, $offset: Int!, $subdomain: String!) {
  marketplace(subdomain: $subdomain) {
    subdomain
    name
    description
    logoUrl
    bannerUrl
    ownerAddress
    creators {
      creatorAddress
      storeConfigAddress
    }
    auctionHouses {
      address
      treasuryMint
      auctionHouseTreasury
      treasuryWithdrawalDestination
      feeWithdrawalDestination
      authority
      creator
      auctionHouseFeeAccount
      bump
      treasuryBump
      feePayerBump
      sellerFeeBasisPoints
      requiresSignOff
      canChangeSalePrice
      stats {
        floor
        average
        volume24hr
      }
    }
  }
  nfts(owners: [$address], limit: $limit, offset: $offset) {
    address
    name
    sellerFeeBasisPoints
    mintAddress
    description
    image(width: 400)
    primarySaleHappened
    creators {
      address
      share
      verified
      profile {
        ...ProfileInfo
      }
    }
    collection {
      address
      name
      image(width: 400)
    }
    owner {
      address
      associatedTokenAccountAddress
    }
    purchases {
      id
      buyer
      auctionHouse {
        address
        treasuryMint
        auctionHouseTreasury
        treasuryWithdrawalDestination
        feeWithdrawalDestination
        authority
        creator
        auctionHouseFeeAccount
        bump
        treasuryBump
        feePayerBump
        sellerFeeBasisPoints
        requiresSignOff
        canChangeSalePrice
      }
      price
      createdAt
    }
    listings {
      id
      tradeState
      seller
      metadata
      auctionHouse {
        address
        treasuryMint
        auctionHouseTreasury
        treasuryWithdrawalDestination
        feeWithdrawalDestination
        authority
        creator
        auctionHouseFeeAccount
        bump
        treasuryBump
        feePayerBump
        sellerFeeBasisPoints
        requiresSignOff
        canChangeSalePrice
      }
      price
      tradeStateBump
      createdAt
      canceledAt
    }
    offers {
      id
      tradeState
      buyer
      metadata
      auctionHouse {
        address
        treasuryMint
        auctionHouseTreasury
        treasuryWithdrawalDestination
        feeWithdrawalDestination
        authority
        creator
        auctionHouseFeeAccount
        bump
        treasuryBump
        feePayerBump
        sellerFeeBasisPoints
        requiresSignOff
        canChangeSalePrice
      }
      price
      tradeStateBump
      tokenAccount
      createdAt
      canceledAt
    }
  }
}
